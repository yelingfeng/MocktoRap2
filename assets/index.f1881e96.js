var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,o,t)=>o in e?__defProp(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,__spreadValues=(e,o)=>{for(var t in o||(o={}))__hasOwnProp.call(o,t)&&__defNormalProp(e,t,o[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(o))__propIsEnum.call(o,t)&&__defNormalProp(e,t,o[t]);return e};import{transformMock}from"./transform.0c15a121.js";import _sfc_main$1 from"./index.51739821.js";import{d as defineComponent,s as ref,u as useMessage,j as reactive,m as onMounted,v as toRefs,x as isString,r as resolveComponent,o as openBlock,c as createBlock,a as createVNode,w as withCtx,y as createTextVNode}from"./vendor.7f3024dd.js";var _sfc_main=defineComponent({name:"MockRap",components:{Vue3JsonEditor:_sfc_main$1},props:{resp:{type:Object,default:()=>({})},req:{type:Object,default:()=>({})}},setup(props){const reqData=ref(props.req),respData=ref(props.resp),transData=ref({}),jsonData=ref(""),formRef=ref(null),message=useMessage(),edtorProps=reactive({jsonResp:{},jsonReq:{},showBtn:!1,mode:"text"}),onJsonReqChange=e=>{edtorProps.jsonReq=e},onJsonRespChange=e=>{edtorProps.jsonResp=e};onMounted((()=>{edtorProps.jsonReq=JSON.stringify(reqData.value),edtorProps.jsonResp=respData.value}));const options=[{label:"POST",value:"POST"},{label:"GET",value:"GET"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"}],intefaceForm=ref({name:"",url:"",method:"GET",bodyOption:"",desc:""}),rules={name:{required:!0,message:"请输入接口名",trigger:"blur"},url:{required:!0,message:"请输入接口URL",trigger:["input","blur"]},method:{required:!0,message:"请输入接口method",trigger:["input"]}},transClick=()=>{formRef.value.validate((errors=>{if(errors)console.log(errors),message.error("先输入接口信息");else{let reqJson,respJson;if(edtorProps.jsonResp&&isString(edtorProps.jsonResp))try{respJson=eval("("+edtorProps.jsonResp+")")}catch(e){console.log(e),message.error("格式不正确")}else respJson=edtorProps.jsonResp;if(edtorProps.jsonReq&&isString(edtorProps.jsonReq))try{reqJson=eval("("+edtorProps.jsonReq+")")}catch(e){console.log(e),message.error("格式不正确")}else reqJson=edtorProps.jsonReq;transData.value=transformMock(reqJson,respJson,intefaceForm.value)}}))};return __spreadValues({formRef:formRef,rules:rules,options:options,jsonData:jsonData,transClick:transClick,transData:transData,intefaceForm:intefaceForm,onJsonReqChange:onJsonReqChange,onJsonRespChange:onJsonRespChange},toRefs(edtorProps))}}),index_vue_vue_type_style_index_0_lang="\n.box {\n  width: 100%;\n  height: 100%;\n  text-align: left;\n}\n.box-left,\n.box-center,\n.box-right {\n  padding: 20px;\n}\n.ace-jsoneditor.ace_editor {\n  height: 300px;\n}\ntextarea.jsoneditor-text {\n  height: 300px;\n}\n";const _hoisted_1={class:"box"},_hoisted_2={class:"box-left"},_hoisted_3={style:{display:"flex","justify-content":"center"}},_hoisted_4=createTextVNode("转换"),_hoisted_5={class:"box-center"},_hoisted_6=createTextVNode("Request"),_hoisted_7=createTextVNode("Response"),_hoisted_8={class:"box-right"};function _sfc_render(e,o,t,r,a,n){const s=resolveComponent("n-input"),l=resolveComponent("n-form-item"),d=resolveComponent("n-select"),i=resolveComponent("n-form"),p=resolveComponent("n-button"),c=resolveComponent("n-card"),u=resolveComponent("n-grid-item"),m=resolveComponent("n-divider"),_=resolveComponent("Vue3JsonEditor"),f=resolveComponent("json-viewer"),h=resolveComponent("n-grid");return openBlock(),createBlock("div",_hoisted_1,[createVNode(h,{cols:24,"x-gap":2,responsive:"screen"},{default:withCtx((()=>[createVNode(u,{span:8},{default:withCtx((()=>[createVNode("div",_hoisted_2,[createVNode(c,{title:"接口相关参数"},{default:withCtx((()=>[createVNode(i,{ref:"formRef","label-width":100,model:e.intefaceForm,rules:e.rules,size:"medium"},{default:withCtx((()=>[createVNode(l,{label:"接口名称",path:"name"},{default:withCtx((()=>[createVNode(s,{value:e.intefaceForm.name,"onUpdate:value":o[1]||(o[1]=o=>e.intefaceForm.name=o),placeholder:"请输入接口名称"},null,8,["value"])])),_:1}),createVNode(l,{label:"接口URL",path:"url"},{default:withCtx((()=>[createVNode(s,{value:e.intefaceForm.url,"onUpdate:value":o[2]||(o[2]=o=>e.intefaceForm.url=o),placeholder:"请输入URL"},null,8,["value"])])),_:1}),createVNode(l,{label:"接口类型",path:"method"},{default:withCtx((()=>[createVNode(d,{value:e.intefaceForm.method,"onUpdate:value":o[3]||(o[3]=o=>e.intefaceForm.method=o),options:e.options},null,8,["value","options"])])),_:1}),createVNode(l,{label:"接口BodyOption",path:"bodyOption"},{default:withCtx((()=>[createVNode(s,{value:e.intefaceForm.bodyOption,"onUpdate:value":o[4]||(o[4]=o=>e.intefaceForm.bodyOption=o),placeholder:"请输入接口BodyOption"},null,8,["value"])])),_:1}),createVNode(l,{label:"接口备注",path:"desc"},{default:withCtx((()=>[createVNode(s,{value:e.intefaceForm.desc,"onUpdate:value":o[5]||(o[5]=o=>e.intefaceForm.desc=o),placeholder:"备注信息"},null,8,["value"])])),_:1})])),_:1},8,["model","rules"]),createVNode("div",_hoisted_3,[createVNode(p,{type:"primary",onClick:e.transClick},{default:withCtx((()=>[_hoisted_4])),_:1},8,["onClick"])])])),_:1})])])),_:1}),createVNode(u,{span:8},{default:withCtx((()=>[createVNode("div",_hoisted_5,[createVNode(c,{"content-style":"min-height: 400px;"},{default:withCtx((()=>[createVNode(m,{"title-placement":"left"},{default:withCtx((()=>[_hoisted_6])),_:1}),createVNode(s,{value:e.jsonReq,"onUpdate:value":o[6]||(o[6]=o=>e.jsonReq=o),type:"textarea",rows:10,placeholder:""},null,8,["value"]),createVNode(m,{"title-placement":"left"},{default:withCtx((()=>[_hoisted_7])),_:1}),createVNode(_,{modelValue:e.jsonResp,"onUpdate:modelValue":o[7]||(o[7]=o=>e.jsonResp=o),"show-btns":e.showBtn,mode:e.mode,lang:"zh",onJsonChange:e.onJsonRespChange},null,8,["modelValue","show-btns","mode","onJsonChange"])])),_:1})])])),_:1}),createVNode(u,{span:8},{default:withCtx((()=>[createVNode("div",_hoisted_8,[createVNode(c,{title:"Rap2Json","content-style":"min-height: 400px;height:400px;"},{default:withCtx((()=>[createVNode(f,{value:e.transData,"expand-depth":3,copyable:"",sort:""},null,8,["value"])])),_:1})])])),_:1})])),_:1})])}_sfc_main.render=_sfc_render;export{_sfc_main as _};
